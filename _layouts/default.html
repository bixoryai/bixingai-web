<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>
    <meta name="description" content="{% if page.description %}{{ page.description }}{% else %}{{ site.description }}{% endif %}">
    
    <!-- Favicon -->
    <link rel="icon" href="{{ site.baseurl }}/assets/images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="{{ site.baseurl }}/assets/images/favicon.ico" type="image/x-icon">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Core CSS -->
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/styles.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/header.css">
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/footer-section.css">
    
    {% if page.custom_css %}
    <!-- Page Specific CSS -->
    {% for css in page.custom_css %}
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/{{ css }}">
    {% endfor %}
    {% endif %}
    
    {% seo %}
</head>
<body class="dark-theme {% if page.body_class %}{{ page.body_class }}{% endif %}">
    <div class="site-wrapper">
        <!-- Header -->
        {% include header.html %}

        <!-- Main Content -->
        {{ content }}

        <!-- Footer -->
        {% include footer.html %}
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Particles JS -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script>
        // Initialize AOS
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true
            });
            
            // Header scroll effect
            const header = document.querySelector('.header');
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });
            
            // Footer company name hover effect
            const footerLogoLink = document.querySelector('.footer-logo-link');
            const companyName = document.querySelector('.company-name');
            
            if (footerLogoLink && companyName) {
                footerLogoLink.addEventListener('mouseenter', function() {
                    companyName.style.textShadow = '0 0 15px rgba(0, 168, 255, 0.5)';
                });
                
                footerLogoLink.addEventListener('mouseleave', function() {
                    companyName.style.textShadow = '0 0 15px rgba(0, 168, 255, 0.3)';
                });
            }
        });
        
        // Translations
        const translations = {
            'en': {
                // Header
                'nav.home': 'Home',
                'nav.services': 'Products & Services',
                'nav.allServices': 'All Services',
                'nav.aiEducation': 'AI Education & Training',
                'nav.customSolutions': 'AI Custom Solutions',
                'nav.aiConsultation': 'Enterprise AI Consultation',
                'nav.industryInsights': 'Industry Insights',
                'nav.about': 'About Us',
                'nav.careers': 'Careers',
                'nav.contact': 'Contact',
                
                // Footer
                'footer.company': 'Bixing Technology',
                'footer.companyDescription': 'A leading provider of AI solutions for businesses. We help organizations leverage the power of artificial intelligence to drive growth and innovation.',
                'footer.quickLinks': 'Quick Links',
                'footer.home': 'Home',
                'footer.about': 'About',
                'footer.careers': 'Careers',
                'footer.industryInsights': 'Industry Insights',
                'footer.services': 'Products & Services',
                'footer.aiEducation': 'AI Education & Training',
                'footer.customSolutions': 'AI Custom Solutions',
                'footer.aiConsultation': 'AI Strategy Consultation',
                'footer.contactUs': 'Contact Us',
                'footer.wechat': 'WeChat',
                'footer.wechatId': 'bixingai',
                'footer.scanQrCode': 'Scan to connect on WeChat',
                'footer.copyright': ' 2023 Bixing Technology. All Rights Reserved.',
                'footer.privacyPolicy': 'Privacy Policy',
                'footer.termsOfService': 'Terms of Service'
            },
            'zh': {
                // Header
                'nav.home': '首页',
                'nav.services': '产品服务',
                'nav.allServices': '所有服务',
                'nav.aiEducation': 'AI教育培训',
                'nav.customSolutions': 'AI定制解决方案',
                'nav.aiConsultation': '企业AI咨询',
                'nav.industryInsights': '行业洞察',
                'nav.about': '关于我们',
                'nav.careers': '职业发展',
                'nav.contact': '联系我们',
                
                // Footer
                'footer.company': '成都毕行科技有限公司',
                'footer.companyDescription': '国际前沿AI解决方案提供商,<br>助你充满AI的力量。',
                'footer.quickLinks': '快速链接',
                'footer.home': '首页',
                'footer.about': '关于我们',
                'footer.careers': '职业发展',
                'footer.industryInsights': '行业洞察',
                'footer.services': '产品服务',
                'footer.aiEducation': 'AI教育培训',
                'footer.customSolutions': 'AI定制解决方案',
                'footer.aiConsultation': '企业AI咨询',
                'footer.contactUs': '联系我们',
                'footer.wechat': '微信',
                'footer.wechatId': 'bixingai',
                'footer.scanQrCode': '扫码添加微信',
                'footer.copyright': ' 2023 成都毕行科技有限公司 版权所有',
                'footer.privacyPolicy': '隐私政策',
                'footer.termsOfService': '服务条款'
            }
        };
        
        function applyTranslations() {
            const currentLanguage = localStorage.getItem('bixingLanguage') || 'en';
            
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    // Use innerHTML for elements that might contain HTML tags
                    if (element.tagName === 'P' || element.classList.contains('company-description')) {
                        element.innerHTML = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });
            
            // Handle placeholder translations
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.placeholder = translations[currentLanguage][key];
                }
            });
            
            // Update language toggle UI
            const currentLanguageElement = document.getElementById('currentLanguage');
            if (currentLanguageElement) {
                currentLanguageElement.textContent = currentLanguage.toUpperCase();
            }
        }
        
        function toggleLanguage() {
            const currentLanguage = localStorage.getItem('bixingLanguage') || 'en';
            const newLanguage = currentLanguage === 'en' ? 'zh' : 'en';
            
            localStorage.setItem('bixingLanguage', newLanguage);
            
            // Update all elements with data-i18n attribute
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (translations[newLanguage] && translations[newLanguage][key]) {
                    // Use innerHTML for elements that might contain HTML tags
                    if (element.tagName === 'P' || element.classList.contains('company-description')) {
                        element.innerHTML = translations[newLanguage][key];
                    } else {
                        element.textContent = translations[newLanguage][key];
                    }
                }
            });
            
            // Handle placeholder translations
            document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
                const key = element.getAttribute('data-i18n-placeholder');
                if (translations[newLanguage] && translations[newLanguage][key]) {
                    element.placeholder = translations[newLanguage][key];
                }
            });
            
            // Update language toggle UI
            const currentLanguageElement = document.getElementById('currentLanguage');
            if (currentLanguageElement) {
                currentLanguageElement.textContent = newLanguage.toUpperCase();
            }
        }
        
        // Apply translations on page load
        document.addEventListener('DOMContentLoaded', function() {
            applyTranslations();
        });
    </script>
    
    {% if page.custom_js %}
    <!-- Page Specific JavaScript -->
    {% for js in page.custom_js %}
    <script src="{{ site.baseurl }}/assets/js/{{ js }}"></script>
    {% endfor %}
    {% endif %}
</body>
</html>
