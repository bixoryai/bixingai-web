function i(){const e=localStorage.getItem("bixingLanguage")||"en",n=document.getElementById("current-language"),t=document.getElementById("current-language-mobile");n&&(n.textContent=e==="en"?"EN":"中文"),t&&(t.textContent=e==="en"?"EN":"中文"),window.applyTranslations&&setTimeout(function(){window.applyTranslations(e)},10)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i();typeof window.toggleLanguage!="function"&&(window.toggleLanguage=function(){const n=(localStorage.getItem("bixingLanguage")||"en")==="en"?"zh":"en";localStorage.setItem("bixingLanguage",n);const t=document.getElementById("current-language"),a=document.getElementById("current-language-mobile");t&&(t.textContent=n==="en"?"EN":"中文"),a&&(a.textContent=n==="en"?"EN":"中文"),window.applyTranslations&&window.applyTranslations(n),document.dispatchEvent(new CustomEvent("languageToggled",{detail:{language:n}}))});function l(){const e=localStorage.getItem("bixingLanguage")||"en";window.translations&&window.translations[e]?(document.querySelectorAll("#header [data-i18n]").forEach(function(t){const a=t.getAttribute("data-i18n");if(window.translations[e][a]){const o=window.translations[e][a];t.textContent=o}}),window.applyTranslations&&window.applyTranslations(e)):setTimeout(l,100)}setTimeout(l,50);document.addEventListener("languageToggled",function(e){const n=e.detail?e.detail.language:localStorage.getItem("bixingLanguage")||"en";console.log("Header received language toggle event:",n),window.applyTranslations&&(window.applyTranslations(n),setTimeout(function(){console.log("Applying translations to header content after language toggle:",n),window.applyTranslations(n)},10),setTimeout(function(){window.applyTranslations(n)},50),setTimeout(function(){window.applyTranslations(n)},100))});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("header");e&&window.addEventListener("scroll",function(){window.scrollY>50?(e.classList.add("scrolled"),e.style.backgroundColor="rgba(10, 16, 32, 0.95)",e.style.paddingTop="4px",e.style.paddingBottom="4px"):(e.classList.remove("scrolled"),e.style.backgroundColor="rgba(10, 16, 32, 0.85)",e.style.paddingTop="6px",e.style.paddingBottom="6px")})});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("mobile-menu-toggle"),n=document.getElementById("mobile-menu"),t=e?.querySelector("div");e&&n&&e.addEventListener("click",function(){const a=e.getAttribute("aria-expanded")==="true";if(e.setAttribute("aria-expanded",!a),n.classList.toggle("hidden"),t){const o=t.querySelectorAll("span");a?(o[0].style.transform="",o[1].style.opacity="",o[2].style.transform=""):(o[0].style.transform="translateY(11px) rotate(45deg)",o[1].style.opacity="0",o[2].style.transform="translateY(-11px) rotate(-45deg)")}})});
